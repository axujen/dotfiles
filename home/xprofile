## vim: ft=sh fdm=marker
## ~/.xprofile: setup environment before the window manager is started
## ideally should be the first thing executed even before the window manager
## you might need to symlink this to ~/.xsession as some display managers dont source this file

# {{{ Xresources
xrdb -remove -all # don't rely on display manager to clean up xresources
for file in "/etc/X11/Xresources" "$HOME/.Xresources" "$HOME/.xresources"; do
    if [ -f "$file" ]; then
        echo "Loading resource: $file"
        xrdb -merge "$file"
    fi
done
# }}}

# {{{ Keyboard
# Enable ctrl:alt:backspace to kill xorg
setxkbmap -option "terminate:ctrl_alt_bksp" # Ctrl-Alt-Backspace kills xorg
# Load Xmodmap
if [ "$(type -P xmodmap)" ]; then
    for file in "/etc/X11/Xmodmap" "$HOME/.Xmodmap" "$HOME/.xmodmap"; do
        if [ -f "$file" ]; then
           echo "Loading modmap: $file"
           xmodmap "$file"
        fi
    done
fi
# }}}

xautolock -time 5 -locker 'i3lock -fc 000000; xset dpms force off' -notify 10 -notifier 'notify-send -t 10000 screensaver locking screen soon!' &
xset dpms 300 # turn off display after 5 minutes
xset -b # remove this goddamn torture

# Use native libs for steam
# https://wiki.archlinux.org/index.php/Steam#Using_native_runtime
export STEAM_RUNTIME=0
