#!/usr/bin/env sh
# Symlink newly added albums in the music directory

# Query for added since
date_query="10 days ago"
date_query=`date +%F -d"$date_query"`

# This is the folder where your music exists
music_dir="$HOME/Music"
link_dir="$music_dir/_Recently Added"

# Delete and recreate the link directory
[ -d "$link_dir" ] && rm -r "$link_dir"
mkdir "$link_dir"

# Create the actual links
beet list -p -a added:"$date_query.." | while read -r line; do
	album="${line#$music_dir}"
	link=$link_dir$album
	mkdir -p "`dirname "$link"`"
	ln -s "$line" "$link"
done
